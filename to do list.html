<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-do list</title>
</head>
<body>
    <h4>To do list</h4>
    <input type="text" id="task" placeholder="Enter your task here"><br><br>
    <button onclick=addTask()>Add Task</button>
    <ol id="taskList"></ol>

    <script>
        let newTask = [];

        class Task {
            constructor(taskId, task, taskStatus){
                this.taskId = taskId;
                this.task = task;
                this.taskStatus = taskStatus;
            }

            edit(newText){
                this.task = newText;
                console.log("Task edited:", this.task);
            }

            delete(){
                console.log("Task deleted");
            }
        }

        function addTask(){    
            let taskInput = document.getElementById("task").value;
            let taskId = newTask.length + 1;
            let taskStatus = "incomplete";

            //new task instance
            let task = new Task(taskId, taskInput, taskStatus);
            newTask.push(task);
            displayTasks();
        }

        //edit task function
        function editTask(taskId, newText){
            let task = newTask.find(t => t.taskId === taskId);
            if(task){
                const newText = prompt("Enter new task text:", task.task);
                task.edit(newText);
                displayTasks();
            }
        }

        //delete task function
        function deleteTask(id){
            newTask = newTask.filter(t => t.taskId !== id);
            console.log("Task deleted with id:", id);
            displayTasks();
        }

        //display tasks function
        function displayTasks(id){
            let taskList = document.getElementById("taskList");
            taskList.innerHTML = "";

            for(let i=0; i<newTask.length; i++){
                let taskItem = document.createElement("li");
                taskItem.textContent = newTask[i].task;
                taskList.appendChild(taskItem);

                const editBtn = document.createElement('button');
                editBtn.textContent = 'Edit';
                editBtn.onclick = () => editTask(newTask[i].taskId, newTask[i].newText);

                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = "Delete";
                deleteBtn.onclick = () => deleteTask(newTask[i].taskId);
                taskItem.appendChild(editBtn);
                taskItem.appendChild(deleteBtn);
        }
        }

    </script>    
</body>
</html>